define("EventGroup",["require","exports"],function(){var a=function(){function a(b){this._id=a._uniqueId++,this._parent=b,this._eventRecords=[]}return a.prototype.dispose=function(){this.off(),this._parent=null},a.prototype.on=function(a,b,c){var d={target:a,eventName:b,parent:this._parent,callback:c};a.__events=a.__events||{},a.__events[b]=a.__events[b]||{count:0},a.__events[b][this._id]=a.__events[b][this._id]||[],a.__events[b][this._id].push(d),a.__events[b].count++,a.addEventListener&&a.addEventListener(b,c),this._eventRecords.push(d)},a.prototype.off=function(a,b,c){for(var d=0;d<this._eventRecords.length;d++){var e=this._eventRecords[d];if(!(a&&a!==e.target||b&&b!==e.eventName||c&&c!==e.callback)){var f=e.target.__events[e.eventName],g=f[this._id];1!==g.length&&c?g.splice(g.indexOf(e),1):delete e.target.__events[e.eventName][this._id],--f.count||delete e.target.__events[e.eventName],this._eventRecords.splice(d,1)}}},a.prototype.raise=function(a,b,c){for(var d,e=this._parent;e&&d!==!1;){var f=e.__events?e.__events[a]:null;for(var g in f)for(var h=f[g],i=0;d!==!1&&i<h.length;i++){var j=h[i];d=j.callback.call(j.parent,b)}e=c?e.parent:null}return d},a.prototype.declare=function(a){var b=this._parent.__declaredEvents=this._parent.__declaredEvents||{};if("string"==typeof a)b[a]=!0;else for(var c=0;c<a.length;c++)b[a[c]]=!0},a.prototype.autoWire=function(b,c){b=b||this._parent,c="on"+(c||"");var d=this._parent.constructor.prototype;for(var e in d)if("function"==typeof d[e]&&0===e.indexOf(c)){var f=e.substr(c.length,1).toLowerCase()+e.substr(c.length+1);a.isDeclared(b,f)&&this.on(this._parent,f,this._parent[e])}},a.isObserved=function(a,b){return a&&a.__events&&a.__events[b]},a.isDeclared=function(a,b){return a&&a.__declaredEvents&&a.__declaredEvents[b]},a._uniqueId=0,a}();return a}),define("ViewModel",["require","exports","EventGroup"],function(a,b,c){var d=function(){function a(a){this.events=new c(this),this.events.declare("change"),this.setData(a)}return a.prototype.dispose=function(){this.events.dispose()},a.prototype.setData=function(a,b){var d=!1;for(var e in a)if(a.hasOwnProperty(e)){var f=this[e],g=a[e];f!==g&&(f&&c.isDeclared(f,"change")&&this.events.off(f),this[e]=g,d=!0,g&&c.isDeclared(g,"change")&&this.events.on(g,"change",this.change))}(d||b)&&this.events.raise("change")},a.prototype.onInitialize=function(){},a.prototype.onActivate=function(){},a.prototype.onDeactivate=function(){},a.prototype.change=function(a){this.events.raise("change",a)},a}();return d}),define("Encode",["require","exports"],function(){var a=function(){function a(){}return a.toHtml=function(a){return a||""},a.toHtmlAttr=function(a){return a||""},a.toJS=function(a){return a||""},a.toUrl=function(a){return a||""},a.toSafe=function(a){return a||""},a}();return a}),define("View",["require","exports","ViewModel","EventGroup","Encode"],function(a,b,c,d,e){var f;!function(a){a[a.CREATED=0]="CREATED",a[a.INACTIVE=1]="INACTIVE",a[a.ACTIVE=2]="ACTIVE",a[a.DISPOSED=3]="DISPOSED"}(f||(f={}));var g=function(){function a(a){this.viewName="View",this.baseTag="div",this.baseClass="",this.baseStyle="",this.viewModelType=c,this._state=0,this.events=new d(this),this.children=[],this._initialData=a}return a.prototype.dispose=function(){3!==this._state&&(2==this._state&&this.deactivate(),this._state=3,this.children.forEach(function(a){a.dispose()}),this.clearChildren(),this.events.dispose(),this._viewModel.dispose())},a.prototype.setData=function(a,b){3!==this._state&&(this.initialize(),this._viewModel.setData(a,b))},a.prototype.initialize=function(){0===this._state&&(this.id=this.viewName+"-"+a._instanceCount,this._viewModel=new this.viewModelType(this._initialData),this._viewModel.onInitialize(),this._state=1)},a.prototype.renderHtml=function(){var a;return 3!==this._state&&(this.initialize(),a=this.onRenderHtml(this._viewModel)),a},a.prototype.activate=function(){1===this._state&&(this._state=2,this._bindEvents(),this.children.forEach(function(a){a.activate()}),this.element=document.getElementById(this.id+"_0"),this.element.control=this,this._viewModel.onActivate(this._subElements))},a.prototype.deactivate=function(){2===this._state&&(this._state=1,this.children.forEach(function(a){a.deactivate()}),this.element.control=null,this._viewModel.onDeactivate())},a.prototype.addChild=function(a){return a.parent=this,this.children.push(a),a},a.prototype.removeChild=function(a){{var b=this.children.indexOf(a);this.children[b]}return b>-1&&(this.children.splice(b,1)[0].parent=null),a},a.prototype.clearChildren=function(){for(;this.children.length>0;)this.removeChild(this.children[0])},a.prototype.onRenderHtml=function(){return'<div id="'+this.id+'"></div>'},a.genStyle=function(a,b){a=a||"";for(var c=a.split(";"),d=0;b&&d<b.length;d+=2)c.push(b[d]+": "+e.toHtmlAttr(this[b[d+1]]));return'style="'+c.join("; ")+'"'},a.genClass=function(a,b){a=a||"";for(var c=a.split(" "),d=0;b&&d<b.length;d+=2)this[b[d+1]]&&c.push(b[d]);return'class="'+c.join(" ")+'"'},a.genAttr=function(a,b){for(var c=[],d=0;d<b.length;d+=2)c.push(b[d]+'="'+e.toHtmlAttr(this[b[d+1]])+'"');return c.join(" ")},a.prototype._bindEvents=function(){for(var a=0;a<this._bindings.length;a++){var b=this._bindings[a];if(b.events)for(var c in b.events){var d=b.events[c],e=document.getElementById(this.id+"_"+b.id);this._viewModel[d]&&this.events.on(e,c,this._viewModel[d])}}},a._instanceCount=0,a}();return g});var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};define("ExampleAppModel",["require","exports","ViewModel"],function(a,b,c){var d=function(a){function b(){a.apply(this,arguments),this.paragraphHtml1="default para 1",this.paragraphHtml2="default para 2",this.isVisible="true",this.isSeperatorVisible=!1}return __extends(b,a),b.prototype.onClick=function(){return alert("hi"),!0},b}(c);return d});var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};define("Header",["require","exports","View"],function(a,b,c){var d=function(a){function b(b){a.call(this,b),this._bindings=[{id:"0"}],this.viewName="Header"}return __extends(b,a),b.prototype.onRenderHtml=function(){return"<"+this.baseTag+' id="'+this.id+'_0" '+c.genStyle(this.baseStyle)+" "+c.genClass(this.baseClass)+"><div>I am a header!</div></"+this.baseTag+">"},b}(c);return d});var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};define("ExampleApp",["require","exports","View","Encode","ExampleAppModel","Header"],function(a,b,c,d,e,f){var g=function(a){function b(b){a.call(this,b),this._bindings=[{id:"0"},{id:"1",html:"paragraphHtml1",css:{display:"isVisible"}},{id:"2",html:"paragraphHtml2"},{id:"3",className:{myclass:"isSeperatorVisible"}},{id:"4",events:{click:"onClick"}}],this.viewName="ExampleApp",this.viewModelType=e,this.addChild(this.header=new f)}return __extends(b,a),b.prototype.onRenderHtml=function(a){return"<"+this.baseTag+' id="'+this.id+'_0" '+c.genStyle(this.baseStyle)+" "+c.genClass("foo"+this.baseClass)+">"+this.header.renderHtml()+'<div id="'+this.id+'_1" '+c.genStyle("",["display","isVisible"])+">"+d.toSafe(a.paragraphHtml1)+'</div><div></div><div id="'+this.id+'_2">'+d.toSafe(a.paragraphHtml2)+'</div><div id="'+this.id+'_3" '+c.genClass("seperator",["myclass","isSeperatorVisible"])+'></div><button id="'+this.id+'_4">Click me</button></'+this.baseTag+">"},b}(c);return g}),define("main",["require","exports","ExampleApp"],function(a,b,c){var d=new c({paragraphHtml1:"Hello <b>World!</b>"});document.body.innerHTML=d.renderHtml(),d.activate()});